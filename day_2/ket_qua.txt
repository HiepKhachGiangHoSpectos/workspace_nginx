# Kinh nghiệm cấu hình Nginx với Docker

- Đường dẫn trong volumes (bên trái dấu ":") luôn là đường dẫn tương đối so với vị trí file docker-compose.yml.
  Ví dụ: ../day_2/html:/usr/share/nginx/html_day2

- Có thể định nghĩa một file default.conf (/etc/nginx/conf.d/default.conf).
  Mỗi khối code (server block) là một server khác nhau, hoặc
  Mỗi server có thể là một file riêng với đuôi .conf, ví dụ site1.conf, site2.conf,...

# Thực tế
- Cả 2 cách đều được Nginx hỗ trợ.
- Khi start, Nginx sẽ load tất cả file .conf trong /etc/nginx/conf.d/ theo thứ tự alphabet.
- Quản trị viên thường thích mỗi site 1 file để dễ bật/tắt, xóa, deploy.
- Trong project học tập, nên mỗi ngày tạo 1 file .conf để tách biệt cho dễ nhìn.
- Khi đi làm thật, tùy quy mô hệ thống, có thể dùng một file chứa nhiều block hoặc nhiều file nhỏ.

# Ví dụ nội dung file .conf (nhiều server block trong 1 file):

server {
    listen 80;
    server_name site1.local;
    root /usr/share/nginx/html_site1;
    index index.html;
}

server {
    listen 81;
    server_name site2.local;
    root /usr/share/nginx/html_site2;
    index index.html;
}

server {
    listen 82;
    server_name site3.local;
    root /usr/share/nginx/html_site3;
    index index.html;
}
