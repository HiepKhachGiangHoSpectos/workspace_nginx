<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chat Demo</title>
</head>
<body>
<h1>Chat Demo – Tình huống 3</h1>
<button id="connect">Connect WebSocket</button><br><br>
<input id="inputMsg" placeholder="Nhập tin nhắn...">
<button id="send">Send</button>
<ul id="messages"></ul>

<script>
    let ws;
    document.getElementById('connect').addEventListener('click', () => {
        ws = new WebSocket('ws://localhost:8216/chat/ws');
        ws.onopen = () => {
            addMsg('Connected to server_chat');
        };
        ws.onmessage = e => addMsg(e.data);
    });

    document.getElementById('send').addEventListener('click', () => {
        const msg = document.getElementById('inputMsg').value;
        ws.send(msg);
        addMsg(`[Bạn]: ${msg}`);
        document.getElementById('inputMsg').value = '';
    });

    function addMsg(text) {
        const li = document.createElement('li');
        li.textContent = text;
        document.getElementById('messages').appendChild(li);
    }
</script>
</body>
</html>
